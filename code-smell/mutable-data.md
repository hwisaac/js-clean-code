가변 데이터(Mutable Data) 악취는 소프트웨어 개발에서 발생하는 코드의 특정 문제점을 가리키는 리팩토링 용어입니다. 이러한 악취가 코드에 존재하면 코드의 유지 보수성과 안정성이 저하될 수 있습니다. 가변 데이터 악취는 주로 객체 지향 프로그래밍에서 발생하며, 객체의 상태가 외부에서 변경 가능한 상태로 유지되는 경우를 가리킵니다.

가변 데이터 악취를 해결하기 위해 불변성(Immutability) 개념이 도입되었습니다. 불변성은 객체가 생성된 후에 내부 상태가 변경되지 않는 것을 의미합니다. 이로 인해 코드는 더 안정적이며 예측 가능하게 됩니다.

가변 데이터 악취의 주요 특징은 다음과 같습니다:

1. 데이터 누수: 가변 데이터를 사용하면 객체의 상태가 외부에서 변경될 수 있으므로, 예기치 않은 상태로 변경되거나 데이터가 누수될 수 있습니다.
2. 복잡성 증가: 가변 데이터를 사용하면 상태를 추적하기 어려워지며 코드의 복잡성이 증가할 수 있습니다.
3. 동시성 문제: 여러 스레드나 프로세스에서 동시에 가변 데이터에 접근하는 경우 동시성 문제가 발생할 수 있습니다.
4. 디버깅 어려움: 가변 데이터는 코드 실행 경로에 따라 상태가 변하므로 디버깅이 어려워질 수 있습니다.

가변 데이터 악취를 해결하는 방법으로 불변성을 활용하는 것이 있습니다. 이를 위해 다음과 같은 접근 방법을 고려할 수 있습니다:

1. 불변 객체: 객체의 상태를 변경할 수 없도록 하고, 필요한 경우 새로운 객체를 생성하여 상태를 업데이트합니다.
2. `Setter` 제거: 객체의 상태를 설정하는(set) 메서드를 제거하고, 생성자 또는 다른 초기화 메서드를 사용하여 객체 상태를 초기화합니다.
3. `const` 사용: 변수 선언 시 const를 사용하여 변수의 재할당을 막습니다.
4. `Object.freeze()`: 객체를 얼려서 불변 객체로 만듭니다. 하지만 이는 얕은 불변성(shallow immutability)만 보장하므로 깊은 구조의 객체에는 유의해야 합니다.
5. 불변성 라이브러리: 불변성을 유지하기 위해 특별한 라이브러리를 사용하는 것도 가능합니다. 예를 들어, Immutable.js는 불변 객체를 지원하는 라이브러리입니다.

가변 데이터 악취를 해결함으로써 코드의 안정성과 유지 보수성을 향상시킬 수 있습니다. 또한, 동시성 문제와 버그를 최소화하고 코드의 예측 가능성을 높일 수 있습니다.

가변 데이터 악취의 일반적인 예시 중 하나는 "객체의 상태를 외부에서 직접 수정하는 경우"입니다. 이러한 상황은 세터 메서드를 과도하게 사용하거나, 객체의 속성에 직접 접근하여 값을 변경하는 경우를 가리킵니다. 이는 객체의 상태를 불안정하게 만들고, 예기치 않은 동작을 유발할 수 있으며, 코드 유지 보수를 어렵게 만드는 문제를 발생시킬 수 있습니다.

예를 들어, 다음은 가변 데이터 악취를 가진 간단한 JavaScript 클래스의 예시입니다:

```js
class Rectangle {
  constructor(width, height) {
    this.width = width;
    this.height = height;
  }

  // Setter methods
  setWidth(width) {
    this.width = width;
  }

  setHeight(height) {
    this.height = height;
  }
}

const rectangle = new Rectangle(10, 5);
rectangle.setWidth(20); // Setter method를 사용하여 객체의 width를 변경함
console.log(rectangle.width); // 출력 결과: 20
```

위의 예시에서 `Rectangle` 클래스는 `setWidth`와 `setHeight` 메서드를 사용하여 객체의 상태를 외부에서 변경하고 있습니다. 이로 인해 객체의 상태가 외부에서 변경 가능하고, 객체의 불변성이 깨집니다. 이러한 코드는 디버깅이 어려울 수 있고, 다른 코드에서 예상치 못한 변경 사항이 발생할 수 있습니다.

이러한 경우, 가변 데이터 악취를 해결하기 위해 세터 메서드를 제거하고 객체를 불변 객체로 만들거나, 객체 생성 시점에 초기값을 설정하도록 변경하는 것이 좋습니다. 예를 들어, 다음과 같이 불변 객체로 만들 수 있습니다:

```js
class Rectangle {
  constructor(width, height) {
    Object.defineProperty(this, 'width', {
      value: width,
      writable: false, // width 속성을 변경 불가능하게 설정
    });
    Object.defineProperty(this, 'height', {
      value: height,
      writable: false, // height 속성을 변경 불가능하게 설정
    });
  }
}

const rectangle = new Rectangle(10, 5);
rectangle.width = 20; // 이제 변경되지 않음
console.log(rectangle.width); // 출력 결과: 10 (변경되지 않음)
```

위의 예시에서는 `Object.defineProperty`를 사용하여 객체의 속성을 변경 불가능하게 설정하여 불변 객체로 만들었습니다. 이로 인해 객체의 상태가 변경되지 않고, 불변성을 유지할 수 있게 됩니다.